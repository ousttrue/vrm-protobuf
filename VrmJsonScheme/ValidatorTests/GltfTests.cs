using System;
using System.IO;
using System.Linq;
using Xunit;

namespace ValidatorTests
{
    public class GltfTests
    {
        [Theory]
        [InlineData("2.0/2CylinderEngine/glTF/2CylinderEngine.gltf")]
        [InlineData("2.0/2CylinderEngine/glTF-Binary/2CylinderEngine.glb")]
        [InlineData("2.0/2CylinderEngine/glTF-Draco/2CylinderEngine.gltf")]
        [InlineData("2.0/2CylinderEngine/glTF-Embedded/2CylinderEngine.gltf")]
        [InlineData("2.0/AlphaBlendModeTest/glTF/AlphaBlendModeTest.gltf")]
        [InlineData("2.0/AlphaBlendModeTest/glTF-Binary/AlphaBlendModeTest.glb")]
        [InlineData("2.0/AlphaBlendModeTest/glTF-Embedded/AlphaBlendModeTest.gltf")]
        [InlineData("2.0/AnimatedCube/glTF/AnimatedCube.gltf")]
        [InlineData("2.0/AnimatedMorphCube/glTF/AnimatedMorphCube.gltf")]
        [InlineData("2.0/AnimatedMorphCube/glTF-Binary/AnimatedMorphCube.glb")]
        [InlineData("2.0/AnimatedMorphCube/glTF-Quantized/AnimatedMorphCube.gltf")]
        [InlineData("2.0/AnimatedMorphSphere/glTF/AnimatedMorphSphere.gltf")]
        [InlineData("2.0/AnimatedMorphSphere/glTF-Binary/AnimatedMorphSphere.glb")]
        [InlineData("2.0/AnimatedTriangle/glTF/AnimatedTriangle.gltf")]
        [InlineData("2.0/AnimatedTriangle/glTF-Embedded/AnimatedTriangle.gltf")]
        [InlineData("2.0/AntiqueCamera/glTF/AntiqueCamera.gltf")]
        [InlineData("2.0/AntiqueCamera/glTF-Binary/AntiqueCamera.glb")]
        [InlineData("2.0/Avocado/glTF/Avocado.gltf")]
        [InlineData("2.0/Avocado/glTF-Binary/Avocado.glb")]
        [InlineData("2.0/Avocado/glTF-Draco/Avocado.gltf")]
        [InlineData("2.0/Avocado/glTF-pbrSpecularGlossiness/Avocado.gltf")]
        [InlineData("2.0/Avocado/glTF-Quantized/Avocado.gltf")]
        [InlineData("2.0/BarramundiFish/glTF/BarramundiFish.gltf")]
        [InlineData("2.0/BarramundiFish/glTF-Binary/BarramundiFish.glb")]
        [InlineData("2.0/BarramundiFish/glTF-Draco/BarramundiFish.gltf")]
        [InlineData("2.0/BarramundiFish/glTF-pbrSpecularGlossiness/BarramundiFish.gltf")]
        [InlineData("2.0/BoomBox/glTF/BoomBox.gltf")]
        [InlineData("2.0/BoomBox/glTF-Binary/BoomBox.glb")]
        [InlineData("2.0/BoomBox/glTF-Draco/BoomBox.gltf")]
        [InlineData("2.0/BoomBox/glTF-pbrSpecularGlossiness/BoomBox.gltf")]
        [InlineData("2.0/BoomBoxWithAxes/glTF/BoomBoxWithAxes.gltf")]
        [InlineData("2.0/Box/glTF/Box.gltf")]
        [InlineData("2.0/Box/glTF-Binary/Box.glb")]
        [InlineData("2.0/Box/glTF-Draco/Box.gltf")]
        [InlineData("2.0/Box/glTF-Embedded/Box.gltf")]
        [InlineData("2.0/BoxAnimated/glTF/BoxAnimated.gltf")]
        [InlineData("2.0/BoxAnimated/glTF-Binary/BoxAnimated.glb")]
        [InlineData("2.0/BoxAnimated/glTF-Embedded/BoxAnimated.gltf")]
        [InlineData("2.0/BoxInterleaved/glTF/BoxInterleaved.gltf")]
        [InlineData("2.0/BoxInterleaved/glTF-Binary/BoxInterleaved.glb")]
        [InlineData("2.0/BoxInterleaved/glTF-Embedded/BoxInterleaved.gltf")]
        [InlineData("2.0/BoxTextured/glTF/BoxTextured.gltf")]
        [InlineData("2.0/BoxTextured/glTF-Binary/BoxTextured.glb")]
        [InlineData("2.0/BoxTextured/glTF-Embedded/BoxTextured.gltf")]
        [InlineData("2.0/BoxTexturedNonPowerOfTwo/glTF/BoxTexturedNonPowerOfTwo.gltf")]
        [InlineData("2.0/BoxTexturedNonPowerOfTwo/glTF-Binary/BoxTexturedNonPowerOfTwo.glb")]
        [InlineData("2.0/BoxTexturedNonPowerOfTwo/glTF-Embedded/BoxTexturedNonPowerOfTwo.gltf")]
        [InlineData("2.0/BoxVertexColors/glTF/BoxVertexColors.gltf")]
        [InlineData("2.0/BoxVertexColors/glTF-Binary/BoxVertexColors.glb")]
        [InlineData("2.0/BoxVertexColors/glTF-Embedded/BoxVertexColors.gltf")]
        [InlineData("2.0/BrainStem/glTF/BrainStem.gltf")]
        [InlineData("2.0/BrainStem/glTF-Binary/BrainStem.glb")]
        [InlineData("2.0/BrainStem/glTF-Draco/BrainStem.gltf")]
        [InlineData("2.0/BrainStem/glTF-Embedded/BrainStem.gltf")]
        [InlineData("2.0/Buggy/glTF/Buggy.gltf")]
        [InlineData("2.0/Buggy/glTF-Binary/Buggy.glb")]
        [InlineData("2.0/Buggy/glTF-Draco/Buggy.gltf")]
        [InlineData("2.0/Buggy/glTF-Embedded/Buggy.gltf")]
        [InlineData("2.0/Cameras/glTF/Cameras.gltf")]
        [InlineData("2.0/Cameras/glTF-Embedded/Cameras.gltf")]
        [InlineData("2.0/CesiumMan/glTF/CesiumMan.gltf")]
        [InlineData("2.0/CesiumMan/glTF-Binary/CesiumMan.glb")]
        [InlineData("2.0/CesiumMan/glTF-Embedded/CesiumMan.gltf")]
        [InlineData("2.0/CesiumMilkTruck/glTF/CesiumMilkTruck.gltf")]
        [InlineData("2.0/CesiumMilkTruck/glTF-Binary/CesiumMilkTruck.glb")]
        [InlineData("2.0/CesiumMilkTruck/glTF-Embedded/CesiumMilkTruck.gltf")]
        [InlineData("2.0/Corset/glTF/Corset.gltf")]
        [InlineData("2.0/Corset/glTF-Binary/Corset.glb")]
        [InlineData("2.0/Corset/glTF-Draco/Corset.gltf")]
        [InlineData("2.0/Corset/glTF-pbrSpecularGlossiness/Corset.gltf")]
        [InlineData("2.0/Cube/glTF/Cube.gltf")]
        [InlineData("2.0/DamagedHelmet/glTF/DamagedHelmet.gltf")]
        [InlineData("2.0/DamagedHelmet/glTF-Binary/DamagedHelmet.glb")]
        [InlineData("2.0/DamagedHelmet/glTF-Embedded/DamagedHelmet.gltf")]
        [InlineData("2.0/Duck/glTF/Duck.gltf")]
        [InlineData("2.0/Duck/glTF-Binary/Duck.glb")]
        [InlineData("2.0/Duck/glTF-Draco/Duck.gltf")]
        [InlineData("2.0/Duck/glTF-Embedded/Duck.gltf")]
        [InlineData("2.0/Duck/glTF-Quantized/Duck.gltf")]
        [InlineData("2.0/EnvironmentTest/glTF/EnvironmentTest.gltf")]
        [InlineData("2.0/EnvironmentTest/glTF-IBL/EnvironmentTest.gltf")]
        [InlineData("2.0/FlightHelmet/glTF/FlightHelmet.gltf")]
        [InlineData("2.0/Fox/glTF/Fox.gltf")]
        [InlineData("2.0/Fox/glTF-Binary/Fox.glb")]
        [InlineData("2.0/Fox/glTF-Embedded/Fox.gltf")]
        [InlineData("2.0/GearboxAssy/glTF/GearboxAssy.gltf")]
        [InlineData("2.0/GearboxAssy/glTF-Binary/GearboxAssy.glb")]
        [InlineData("2.0/GearboxAssy/glTF-Draco/GearboxAssy.gltf")]
        [InlineData("2.0/GearboxAssy/glTF-Embedded/GearboxAssy.gltf")]
        [InlineData("2.0/InterpolationTest/glTF/InterpolationTest.gltf")]
        [InlineData("2.0/InterpolationTest/glTF-Binary/InterpolationTest.glb")]
        [InlineData("2.0/Lantern/glTF/Lantern.gltf")]
        [InlineData("2.0/Lantern/glTF-Binary/Lantern.glb")]
        [InlineData("2.0/Lantern/glTF-Draco/Lantern.gltf")]
        [InlineData("2.0/Lantern/glTF-pbrSpecularGlossiness/Lantern.gltf")]
        [InlineData("2.0/Lantern/glTF-Quantized/Lantern.gltf")]
        [InlineData("2.0/MetalRoughSpheres/glTF/MetalRoughSpheres.gltf")]
        [InlineData("2.0/MetalRoughSpheres/glTF-Binary/MetalRoughSpheres.glb")]
        [InlineData("2.0/MetalRoughSpheres/glTF-Embedded/MetalRoughSpheres.gltf")]
        [InlineData("2.0/MetalRoughSpheresNoTextures/glTF/MetalRoughSpheresNoTextures.gltf")]
        [InlineData("2.0/MetalRoughSpheresNoTextures/glTF-Binary/MetalRoughSpheresNoTextures.glb")]
        [InlineData("2.0/MorphPrimitivesTest/glTF/MorphPrimitivesTest.gltf")]
        [InlineData("2.0/MorphPrimitivesTest/glTF-Binary/MorphPrimitivesTest.glb")]
        [InlineData("2.0/MorphPrimitivesTest/glTF-Draco/MorphPrimitivesTest.glb")]
        [InlineData("2.0/MultiUVTest/glTF/MultiUVTest.gltf")]
        [InlineData("2.0/MultiUVTest/glTF-Binary/MultiUVTest.glb")]
        [InlineData("2.0/MultiUVTest/glTF-Embedded/MultiUVTest.gltf")]
        [InlineData("2.0/NormalTangentMirrorTest/glTF/NormalTangentMirrorTest.gltf")]
        [InlineData("2.0/NormalTangentMirrorTest/glTF-Binary/NormalTangentMirrorTest.glb")]
        [InlineData("2.0/NormalTangentMirrorTest/glTF-Embedded/NormalTangentMirrorTest.gltf")]
        [InlineData("2.0/NormalTangentTest/glTF/NormalTangentTest.gltf")]
        [InlineData("2.0/NormalTangentTest/glTF-Binary/NormalTangentTest.glb")]
        [InlineData("2.0/NormalTangentTest/glTF-Embedded/NormalTangentTest.gltf")]
        [InlineData("2.0/OrientationTest/glTF/OrientationTest.gltf")]
        [InlineData("2.0/OrientationTest/glTF-Binary/OrientationTest.glb")]
        [InlineData("2.0/OrientationTest/glTF-Embedded/OrientationTest.gltf")]
        [InlineData("2.0/ReciprocatingSaw/glTF/ReciprocatingSaw.gltf")]
        [InlineData("2.0/ReciprocatingSaw/glTF-Binary/ReciprocatingSaw.glb")]
        [InlineData("2.0/ReciprocatingSaw/glTF-Draco/ReciprocatingSaw.gltf")]
        [InlineData("2.0/ReciprocatingSaw/glTF-Embedded/ReciprocatingSaw.gltf")]
        [InlineData("2.0/RiggedFigure/glTF/RiggedFigure.gltf")]
        [InlineData("2.0/RiggedFigure/glTF-Binary/RiggedFigure.glb")]
        [InlineData("2.0/RiggedFigure/glTF-Embedded/RiggedFigure.gltf")]
        [InlineData("2.0/RiggedSimple/glTF/RiggedSimple.gltf")]
        [InlineData("2.0/RiggedSimple/glTF-Binary/RiggedSimple.glb")]
        [InlineData("2.0/RiggedSimple/glTF-Embedded/RiggedSimple.gltf")]
        [InlineData("2.0/SciFiHelmet/glTF/SciFiHelmet.gltf")]
        [InlineData("2.0/SimpleMeshes/glTF/SimpleMeshes.gltf")]
        [InlineData("2.0/SimpleMeshes/glTF-Embedded/SimpleMeshes.gltf")]
        [InlineData("2.0/SimpleMorph/glTF/SimpleMorph.gltf")]
        [InlineData("2.0/SimpleMorph/glTF-Embedded/SimpleMorph.gltf")]
        [InlineData("2.0/SimpleSparseAccessor/glTF/SimpleSparseAccessor.gltf")]
        [InlineData("2.0/SimpleSparseAccessor/glTF-Embedded/SimpleSparseAccessor.gltf")]
        [InlineData("2.0/SpecGlossVsMetalRough/glTF/SpecGlossVsMetalRough.gltf")]
        [InlineData("2.0/SpecGlossVsMetalRough/glTF-Binary/SpecGlossVsMetalRough.glb")]
        [InlineData("2.0/Sponza/glTF/Sponza.gltf")]
        [InlineData("2.0/Suzanne/glTF/Suzanne.gltf")]
        [InlineData("2.0/TextureCoordinateTest/glTF/TextureCoordinateTest.gltf")]
        [InlineData("2.0/TextureCoordinateTest/glTF-Binary/TextureCoordinateTest.glb")]
        [InlineData("2.0/TextureCoordinateTest/glTF-Embedded/TextureCoordinateTest.gltf")]
        [InlineData("2.0/TextureSettingsTest/glTF/TextureSettingsTest.gltf")]
        [InlineData("2.0/TextureSettingsTest/glTF-Binary/TextureSettingsTest.glb")]
        [InlineData("2.0/TextureSettingsTest/glTF-Embedded/TextureSettingsTest.gltf")]
        [InlineData("2.0/TextureTransformTest/glTF/TextureTransformTest.gltf")]
        [InlineData("2.0/Triangle/glTF/Triangle.gltf")]
        [InlineData("2.0/Triangle/glTF-Embedded/Triangle.gltf")]
        [InlineData("2.0/TriangleWithoutIndices/glTF/TriangleWithoutIndices.gltf")]
        [InlineData("2.0/TriangleWithoutIndices/glTF-Embedded/TriangleWithoutIndices.gltf")]
        [InlineData("2.0/TwoSidedPlane/glTF/TwoSidedPlane.gltf")]
        [InlineData("2.0/UnlitTest/glTF/UnlitTest.gltf")]
        [InlineData("2.0/UnlitTest/glTF-Binary/UnlitTest.glb")]
        [InlineData("2.0/VC/glTF/VC.gltf")]
        [InlineData("2.0/VC/glTF-Binary/VC.glb")]
        [InlineData("2.0/VC/glTF-Draco/VC.gltf")]
        [InlineData("2.0/VC/glTF-Embedded/VC.gltf")]
        [InlineData("2.0/VertexColorTest/glTF/VertexColorTest.gltf")]
        [InlineData("2.0/VertexColorTest/glTF-Binary/VertexColorTest.glb")]
        [InlineData("2.0/VertexColorTest/glTF-Embedded/VertexColorTest.gltf")]
        [InlineData("2.0/WaterBottle/glTF/WaterBottle.gltf")]
        [InlineData("2.0/WaterBottle/glTF-Binary/WaterBottle.glb")]
        [InlineData("2.0/WaterBottle/glTF-Draco/WaterBottle.gltf")]
        [InlineData("2.0/WaterBottle/glTF-pbrSpecularGlossiness/WaterBottle.gltf")]
        public void GltfSampleModelsTest(string file)
        {
            var path = Path.Combine(System.Environment.GetEnvironmentVariable("GLTF_SAMPLE_MODELS"), file);
            var context = VrmValidator.Validator.Validate(path);
            
            var filtered = context.Messages.Where(x => !x.JsonPath.Contains(".extras.")).ToArray();

            Assert.Empty(filtered);
        }
    }
}
